# PICO-8 Workspace
For all the pico-eighters out there, this repo contains [@alanxoc3](https://twitter.com/alanxoc3)'s PICO-8 life.

The directory structure is as follows:
* `/TEMPLATE` The template to jumpstart future projects. Includes common functions for a game.
* `/bin` Shell scripts for preprocessing & minifying projects.
* `/lib` Useful library snippets for other projects to use.
* `/.archive` An incomplete collection of pico-8 cartridges I made.

To ensure the compilation scripts scripts run correctly, set the environment variable `PICO_WORK_DIR` to the root of this repo. You can easily run the compilation scripts if you add `PICO_WORK_DIR/bin` to your path too. So add these to your shell's rc file:
```
export PICO_WORK_DIR=$HOME/.lexaloffle/pico-8/carts/pico-8-work
export PATH="$PATH:$PICO_WORK_DIR/bin"
```

# Build Workflow
The `game.p8` file is the file you can open with pico-8. This file includes a `.code.lua` file which can be generated by running `pico-compile`. The `pico-compile` command will cat all the files in `src/` together, sorted by alphabetical order, trim out unneeded whitespace, optionally include debug code with `pico-compile -d`, and optionally minify all the code with `pico-compile -m`.

The minifier is not a standard pico-8 or standard lua minifier. Instead it is built with a specific subset of pico-8 in mind that relies on a ztable lua function to unpack data from strings. I'm too lazy to document everything, but here are a few bullet points of some of the catches if you want to use the minifier:
* Variable names, functions, and tokens in general that are not pico-8 std library functions or lua keywords will be minified.
* Text within single quotes WILL BE minified.
* Text within double quotes WILL NOT BE minified.
* Text within double square brackets (multiline lua strings) will be minified and replaced with an index that ztable uses. You must always use multiline strings with ztable.
