pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- snow collect
-- by alex, alan, and colton


g_snow = {}

snow_color = 7
snow_ground_max = 100
snow_ground_count = 0
initial_ground_y = -5
snow_ground_y = initial_ground_y

g_time = 0

function _init()
end

function _update60()
	if g_time % 2 == 0 then
		add(g_snow, create_snow_particle())
	end

	for p in all(g_snow) do
		p.update()
	end

	if snow_ground_count >= 180 then
		for p in all(g_snow) do
			if p.y >= snow_ground_y and flr(rnd(2)) == 0 or p.y > snow_ground_y then
				del(g_snow, p)
			end
		end

		snow_ground_y -= 1
		snow_ground_count = 0
	end

	-- count snow particles
	snow_ground_count = 0
	for p in all(g_snow) do
		if p.y >= snow_ground_y then
			snow_ground_count += 1
		end
	end

	g_time+=1
end

function _draw()
	cls(5)
	palt(0, false)
	palt(14, true)

	spr(1, 64 - 16, initial_ground_y - 29, 4, 4)
	for p in all(g_snow) do
		p.draw()
	end
	rectfill(0, snow_ground_y+1, 127, 127, 7)

	print("cpu "..stat(1), 3, 3, 0)
end

function create_snow_particle()
	local buf = 30
	local p = {
		x = rnd(128 + buf * 2) - buf,
		y = -rnd(10)-3,
		dx = rnd(.05),
		dy = rnd(.2)+.2,
		r = rnd(1)+.5,
	}

	p.update=function() update_snow_particle(p) end
	p.draw=function() draw_snow_particle(p) end
	return p
end

function draw_snow_particle(p)
	circfill(p.x, p.y, p.r, snow_color)
end

function update_snow_particle(p)
	if p.y >= snow_ground_y then
		return
	end

	-- down arrow
	if btn(3) then
		p.dy += .01
	end

	if btn(0) then
		p.dx -= .0005
	end

	if btn(1) then
		p.dx += .0005
	end

	if p.y < snow_ground_y then
		p.x += p.dx
		p.y += p.dy
	end

	if p.y >= snow_ground_y then
		p.y = snow_ground_y
	end
end

__gfx__
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700eeeeee4eeeeeeeee7777eeeeeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000eeeeee4eeeeeee77707777eee4eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000eeeeee4eeeeeee7777799999e4eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700ee4eee4eeeeeee77777999eee44eeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000ee444e4eeeeeee77777777ee44eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeee4444eeeee766777767e44eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee44eee777766667774eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee4447777777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeee44477777777177eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeee7447777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeee7777777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeee7777777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeee7777777777177eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeee66677777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeee77776677777766eeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeee777777666666777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee77777777777777777eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee777777777777777177eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777177eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee7777777777777777777eeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee777777777777777777eeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeee7777777777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeee777777777777777eeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeeeeeee777777777777eeeeeeeeee000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555777555555
57555555557555555555555555555555557555555555555755555555575555555555555555555555555555555555555555555555555555555555555575555555
55555555555555555555555555555555577755555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55550050005050555550005555500050007000555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55505550505050555550505555555050555550555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55505550005050555550505555500070005550555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55505550555050555550505555505777505550555555555555555555555555555555555555555555555555555555555755555555555555555555555555555555
55550050555500555550005505500070005550555555555555555555555555555555555555555555555555555555555555555555555575555555555575555555
55555555555555555555557555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
57555555555755555555577755555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555557555555555555555555555555555555555555555555555555755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555557775555555555555555555555555555555555555555555555555555555
55555555555555557555555555555755555555555755555555555555555555555555555755555555555555555555555555555555555555555555555555555555
55555555555555577755555555557775555555557775555555557555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555557555555555555755555555555755555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555755555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555
55555555555555555555555555555555555555755555555555555555555555555555555555555555555555755555555555555555555555555557775555555555
55555555555555555555555555555555555555555555555557555555575555555555555555555555555557775555555555555555555555555555755555555555
55555555555555555555555555555555555555555555555555555555777555555555555555555555555555755555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555575555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
75555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555575555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555575555555555555555555555555555555555555555555555555555555555555
55555555555555555555557555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555755555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555755555555555555555557775555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555755555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555557555555555555555555555555555575557555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555777577755555555555555
55555555555555555555555555555555555555555555555557555555555555555555555555555555555555555555555555555555555575557555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555557775555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555557775555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555557555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555755555555555555555555555555577755555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555557775555555555557555555555555557555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555575555555755555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555575555555557555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555577755555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555557555555555555555
55555555555555555555555555555555555555555555555555575555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555777555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555575555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555545555555557777555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555545555555777077775554555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555545555555777779999954555555555555555555555555555555555555555555555555555555
55555555555555555555555555555755555555555555555555455545555555777779995554455555555555555555555555555555555555555555555555555555
55555555555555555555555555557775555555555555555555444545555555777777775544555555555555555555555555555555555555555555555555555555
55555555555555555555555555555755555555555555555555554444555557667777675445555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555554455577776666777455555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555444777777777777755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555554447777777717755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555744777777777755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555777777777777755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555777777777777755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555777777777717755555555555555555555555555555555555555555555555555555555
55555555555555755555555555555555555555555555555555555555556667777777777755555555555555555555555555555555555555555555555555555555
55555555555557775555555555555555555555555555555555555555577776677777766555555555555555555555555555555555555555555555555555555555
55575555555555755555555555555555555555555555555555555555577777766666677755555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555777777777777777775555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555777777777777777777555555555555555555555555555555555555555555555555555557
55555555555555555555555555555555555555555555555555555555777777777777777177555555555555555555555555555555555555555555555555555577
55555555555555555555555555555555555555555555555555555555777777777777777777555555555555555555555555555555555555555555555555555557
55555555555555555555555555555555555555555555555555555557777777777777777777555555555555555555555555555555555555555555555555555555
55555555555555555555555555557555555555555555555555555557777777777777777777555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555557777777777777777777555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555557777777777777777777555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555557777777777777777177555555555555555555555555555555555555555555555555555555
55555755557557555555555557555555557555755555555557575577777777777777777777555557575555755555555555555555555555555555575555555555
55557775577777755557775577755755777777775557777777777777777777777777777775755577777577777555555775555755555757555575777757555755
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777

