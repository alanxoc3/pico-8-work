pico-8 cartridge // http://www.pico-8.com
version 39
__lua__

-- ok, i like metatables now

api = {}
for k,v in pairs(_ENV) do
 api['_'..k] = v
end

setmetatable(_ENV, {__index=api})

for k,v in pairs(_ENV) do
 printh(k)
end

blah = "hahaha"
tbl = { a="hello" }
_g = { b="goaway" }

_setmetatable(_g, {__index=_ENV})
_setmetatable(tbl, {__index=_g})

_cls()
function gogo(tbl)
    ?tbl.a
    ?"hello"
    ?tbl.blah
    ?tbl.b
    ?tbl["b"]
end

gogo(tbl)


__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
