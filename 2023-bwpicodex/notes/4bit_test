#!/usr/bin/python3
# Rand func from Josiah Windstone on Discord. Everything else from Alanxoc3.
from PIL import Image
import math

picopal = [
  (0x00+0x00, 0x00+0x00, 0x00+0x00),
  (0x40+0x00, 0x40+0x00, 0x40+0x00),
  (0x80+0x00, 0x80+0x00, 0x80+0x00),
  (0xc0+0x00, 0xc0+0x00, 0xc0+0x00),
]

spr = [
4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,
4,4,4,4,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,4,4,4,4,
4,4,4,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,4,4,4,
4,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,0,4,
0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,2,0,0,
0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,2,2,0,
0,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,2,3,0,
0,1,3,1,3,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,0,2,2,0,
0,1,3,1,3,1,0,2,1,1,1,2,1,2,1,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,0,2,3,0,
0,1,1,1,1,1,0,2,1,2,1,2,1,1,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,1,1,1,2,1,2,2,2,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,0,2,2,0,
0,1,3,1,3,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,1,2,1,2,1,1,1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,2,2,0,1,1,0,2,2,0,
0,1,1,1,1,1,0,2,1,1,1,2,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,2,2,1,2,1,2,1,2,1,2,1,2,2,2,2,3,3,3,3,3,2,2,2,2,1,1,1,2,2,2,2,0,1,1,0,2,2,0,
0,1,3,1,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,1,1,1,1,2,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,1,1,2,2,1,1,1,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,2,2,1,1,1,1,2,2,2,0,1,1,0,2,3,0,
0,1,1,1,1,1,0,2,2,1,2,2,2,2,1,2,2,2,2,2,2,3,3,3,3,2,3,3,3,3,2,2,1,1,1,1,2,2,2,0,1,1,0,2,2,0,
0,0,1,1,1,1,0,2,1,1,1,2,2,2,1,2,2,2,2,2,2,3,3,3,2,2,2,3,3,3,2,2,2,1,1,1,2,2,2,0,1,1,0,2,3,0,
4,0,0,1,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,2,3,3,3,3,2,2,2,2,1,1,2,2,2,0,1,1,0,2,2,0,
4,4,0,1,1,1,0,2,1,2,2,2,1,1,1,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,2,2,1,1,2,2,2,0,1,1,0,0,2,0,
4,4,0,1,1,1,0,2,1,2,2,2,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,2,2,2,2,2,1,1,1,2,2,2,0,1,1,1,0,0,0,
4,4,0,1,1,1,0,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,2,2,2,0,1,1,1,1,0,4,
4,4,0,1,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,0,1,1,1,1,0,4,
4,4,0,1,1,1,0,2,1,1,1,2,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,0,1,1,1,0,0,0,
4,4,0,1,1,1,0,2,1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,0,1,1,0,0,2,0,
4,0,0,1,1,1,0,2,1,2,1,2,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,0,1,1,0,2,2,0,
0,0,1,1,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,2,2,2,2,1,1,1,1,2,2,0,1,1,0,2,3,0,
0,1,1,1,1,1,0,2,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,1,1,1,2,2,0,1,1,0,2,2,0,
0,1,3,3,3,1,0,2,2,1,2,2,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,2,1,1,2,2,0,1,1,0,2,3,0,
0,1,3,1,3,1,0,2,1,1,1,2,1,2,2,2,2,2,2,2,2,2,2,3,3,3,3,2,3,3,3,3,2,2,2,1,1,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,2,2,2,3,3,3,2,2,2,1,1,2,2,0,1,1,0,2,2,0,
0,1,1,1,1,1,0,2,1,2,1,2,1,1,1,2,2,2,2,2,2,2,2,3,3,3,3,2,3,3,3,3,2,2,2,1,1,2,2,0,1,1,0,2,3,0,
0,1,1,3,1,1,0,2,1,1,1,2,2,2,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,2,1,1,2,2,0,1,1,0,2,2,0,
0,1,1,3,1,1,0,2,1,2,1,2,1,1,1,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,2,2,2,1,1,1,2,2,0,1,1,0,2,3,0,
0,1,1,3,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,2,2,2,2,1,1,1,1,2,2,0,1,1,0,2,2,0,
0,1,1,1,1,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,2,2,0,1,1,0,2,3,0,
0,1,3,3,3,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,2,2,2,2,0,1,1,0,2,3,0,
0,1,3,1,3,1,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,1,1,0,2,2,0,
0,1,3,3,3,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,2,3,0,
0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,2,2,0,
0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,2,0,0,
4,0,0,0,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,0,0,0,4,
4,4,4,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,4,4,4,
4,4,4,4,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,4,4,4,4,
4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,
]



def srand(seed=0):
  global seedhi, seedlo
  if seed == 0:
    seedhi, seedlo = 0x60009755, 0xdeadbeef
  else:
    seedhi, seedlo = seed ^ 0xbead29ba, seed

  # call rnd() 32 times
  for _ in range(32):
    rnd()

def rnd(maxnum=0x10000):
  global seedhi, seedlo
  # rotate seedhi by 16
  seedhi = (seedhi << 16) | (seedhi >> 16)
  seedhi &= 0xffffffff
  # add seedlo to seedhi
  seedhi += seedlo
  seedhi &= 0xffffffff

  # add seedhi to seedlo
  seedlo += seedhi
  seedlo &= 0xffffffff

  # result = seedhi mod maxnum
  return seedhi % maxnum

dim = 32
dimx = 46
dimy = 46
mul = int(128/dim)
img = Image.new('RGBA', (dimx*4, dimy*4))
srand()

count = 0
for i in range(dimy):
  for j in range(dimx):
    if spr[j*46+i] >= 4: continue

    a = 255
    yoff = 7
    iscenter = False
    if i < 32+yoff and i >= 0+yoff and j >= 7 and j < 39:
      r, g, b = picopal[spr[j*46+i]] # picopal[rnd(4)//1]
      iscenter = True
    else:
      r, g, b = picopal[spr[j*46+i]]

    for z in range(4):
      for y in range(4):
        lr = r + (rnd(64 if count % 3 == 0 else 32)//1) % 256
        lg = g + (rnd(64 if count % 3 == 1 else 32)//1) % 256
        lb = b + (rnd(64 if count % 3 == 2 else 32)//1) % 256
        count += 1

        img.putpixel((j*mul+z, i*mul+y), (lr, lg, lb, a))

print(count)
img.save('f.png')
