g_gunvals_raw="|!ex/@1/-2,!ex/@2/-2,!ex/@3/2,!ex/@4/2,13;!ex/@1/-1,!ex/@2/-1,!ex/@3/1,!ex/@4/1,1;|@1,@2,!ex/@3/1,@5;@1,@2,@3,@4;|0x8000,0x8000,0x7fff,0x7fff,@1|0,0,0,0,0,0,0;1,1,1,0,0,0,0;2,2,2,1,0,0,0;3,3,3,1,0,0,0;4,2,2,2,1,0,0;5,5,1,1,1,0,0;6,13,13,5,5,1,0;7,6,13,13,5,1,0;8,8,2,2,2,0,0;9,4,4,4,5,0,0;10,9,4,4,5,5,0;11,3,3,3,3,0,0;12,12,3,1,1,1,0;13,5,5,1,1,1,0;14,13,4,2,2,1,0;15,13,13,5,5,1,0;|rj;3;z,;at,|ca:@1;r:@2;it:@3;en:@4;es=@1,|lr;3;z,;at,|z;0;,;rn,hv,cu,hm,tu,nu,ow|eq:eo;tg:0;r:d;en:d;at:@1;nu:@2;tu:@3;ow:@4;rn:d;rg:d;hv:d;cu:d;hm:d;sk:d;sy:@5;|az;0;z,;|rc:thing;|eu;0;z,;na,|na:d;|c_;0;z,;|sx:eo;|et;0;z,;|a:0;o:0;|cj;0;z,;at,nb,nc,sa|;|tl;0;et,;|x:.375;k:.375;|lq;0;b,;|cb;0;b,;|me;0;lq,;|dh;0;et,|hi:@1;|ak;0;z,;|ig:@1;sf:@2;nq:@3;|mt;0;ak,;|ig:$sf;|un;0;ak,;|ig:$nq;|nt;0;z,;|t:0;sa:@1;|tn;0;et,;|g:0;p:0;nc:@1;|ax;0;tn,;|sn:1;si:1;th:0;tf:0;nb:@1;stop:@2;|tv;0;z,;nv,|ek:ii;ob:0;n_:0;as:0;st:0;hw:tk;nv:@1;|_;0;et,;sr,|ox:0;oo:0;ou:0;tx:0;hk:eo;sr:@1;|tp;0;_,;h,|h:d;|li;0;_,;h,|lo;0;_,;h,|ie;0;_,;h,|dm;0;_,;h,|dt;0;_,;h,|ri;0;_,;h,|cf;0;_,;h,|lz;0;_,;h,|mf;0;_,;h,|nk;0;tn,_,;|w:0;iu:BG_UI;ep:1;eg:1;v:tk;oq:tk;ui:@1;us:@2;mu:@3;|spr;0;nk,;|h:@1;|rv;0;ax,;|ix:@1;|mr;0;ax,_;|uz:@1;|d_;0;z,;|tr:1;dn:1;uv:eo;um:@1;cv:@2;|u_;0;d_,;|lh;0;spr,nt;|rf:,;dq:1;ok:0;hj:1;ce:0;ss:ii;rp:@1;|ir;0;tn,tl;|hq:d;hh:d;co:d;uk:@1;uc:@1;|op;1;tn,tl;|is:@1;oy:d;|b;0;tn,tl;|is:eo;oy:d;ay:@1;|g:0;p:0|a,g,@1,@2,@3,@4;o,p,@1,@2,@5,@6;|ng;0;tn,tl;|le:eo;oz:d;hc:@1;|np;0;spr,op/eo,eu,az;|sq:d;nz:0;sp:0;iz:.75;nn:.75;ir:ii;r:@1;ul:@1;|ms;0;tp,mi,np,az;|x:.5;k:.5;oo:-2;en:%md|uq;0;tv,rv,b;|df:1;cl:1;oy:@1;cy:@1;|td;0;tp,tv,eu,nk;|uh:eo;sk:@1;|uj;0;tv,_,td;|r:@1;en:@2;it:@3;uw:@1;ut:@2;ck:@3;ub:@4;poke:20;au:20;ht:0;|uf;0;tp,np,az;at,|ud:eo;sq:@1;x:.5;k:.5;oo:-3;nz:0;sp:.125;iz:.5;nn:.625;iw:BOGUS_SPOT;dk:99|mm;0;z,;|rn:@1;iw:BOGUS_SPOT;lb:eo;|rm;1;ri,tv,eu|ek:@1;h:@2;en:@3;r:@4;|nd;2;tp,spr,ax,ng,b,eu,ak|a:@1;o:@2;ep:2;eg:2;v:tk;sn:.90;si:.98;af:tk;lf:.5;w:6;tf:.01;en:@3;oz:@4;,;r=@5,en=d;|sh;1;ie,spr,et,eu|a:@1;r:@2;en:@3;,es=96;|h_;2;ie,et,eu|a:@1;o:@2;h:@3;en:@4;u:hey there kitty;|m;4;z,eu;rs,ic|a:0;o:0;mb:2;sx:eo;ed:@1;er:@2;tw:@3;el:@4;ic:@5;rs:@6;up:@7;,;|@1,a,ed,ox;@1,o,er,oo|a=64,o=64,r=@2,en=d,h=@1,es=2.5;r=@3,en=@4,h=@5;|eu,na;eu,tu;eu,ow|a:-16;o:0;ed:48;er:16;|z,at;_,sr;ax,nb;nd,ay,@1;ng,hc,@2;tv,nv;tn,nc;dh,hi;ak,ig;lh,rp;nt,sa;m,ic;|z,nu|ie,h;dm,h;dt,h;|tp,h;li,h;lo,h;ri,h;cf,h;lz,h;|"
j={}
function hr(tc,dc)
sfx(tc,-1,dc*4,4)
end
function av(te,e,s)
return te(e)and te(s)and 0 or te(e)and 0xffff or te(s)and 1 or 0
end
function j.ex(e,s)return e+s end
function j.mw(e,s)return e-s end
function aw(hy)return hy and 0xffff or 1 end
function sy(e,...)
local rr,oe=eb(...),e or{}
for r=1,#rr do
oe=oe[rr[r]]
if not oe then
break
end
end
return oe
end
function ot()return av(btn,0,1)end
function ue()return av(btn,2,3)end
function uy()return av(btnp,0,1)end
function cz()return av(btnp,2,3)end
function rb(tc)return tc==0 and 0 or sgn(tc)end
function lw(tc)return flr(tc+.5)end
function no(dz)return(on"3"-1)*(dz or 1)end
function ur(ol,cc)
return t()%ol<cc
end
function on(a)
return flr(rnd(a))
end
function so(aj)
return aj[on(#aj)+1]
end
function ao(dv,t_)
t_=t_ or{}
for y,ee in pairs(dv or{})do
if type(ee)=="table"and not ee.dj then
t_[y]=ao(ee)
else
t_[y]=ee
end
end
return t_
end
function ez(table,sw,...)
if table and table[sw]then
return table[sw](...)
end
end
function lm(ov,q)
foreach(q,function(t)ov(unpack(t))end)
end
function ey(ov,...)
lm(ov,eb(...))
end
function ns(e)
e.ae=e.ae or 1
if not e.nj then
e.ik=function()
if e.sx then
e.aq=(e.ae%#e)+1
else
e.aq=e.ae+1
end
end
e.l,e.es,e.nj=0,nil,true
ao(e[e.ae]or{},e)
ez(e,"r",e)
end
if ez(e,"en",e)then e:ik()end
e.l+=1/60
if e.es and e.l>=e.es then
e:ik()
end
if e.aq then
local id=e.aq
e.ae,e.nj,e.aq=id,nil,nil
ez(e,"it",e)
return id>#e or id<1
end
end
function r_(t)
if t then
for n=2,#t do
local r=n
while r>1 and t[r].o<t[r-1].o do
t[r],t[r-1]=t[r-1],t[r]
r=r-1
end
end
end
end
lt=split(g_gunvals_raw,"|")
sl={}
function d()end
function eb(dg,...)
local em=lt[0+dg]
local q,tt=unpack(sl[em]or{})
if not q then
q,tt={},{}
for td in all(split(em,";"))do
local y,ee=sz(td,":",q)
local rd=function(hd,lg,ld)
return lj(ld or q,lg or y,hd,tt)
end
local e_,se={},split(ee,",")
for td in all(se)do
local y,ee=sz(td,"=",e_)
if #se==1 then
e_=rd(ee)
else
e_[y]=rd(ee,y,e_)
end
end
q[y]=e_
end
sl[em]={q,tt}
end
local tq={...}
foreach(tq,ln)
foreach(tt,function(dl)
local t,y,te=unpack(dl)
t[y]=te(tq)
end)
return q
end
function sz(aj,ry,q)
local ac=split(aj,ry)
return ac[#ac-1]or #q+1,ac[#ac]
end
function lj(q,y,ee,tt)
local ta=split(ee,"/")
local iv,ru,od=#ta>1
if ord(ee)==33 then
iv,od=true,deli(ta,1)
ru={
q,y,function()
return j[sub(od,2)](unpack(ta))
end
}
end
for r,a in ipairs(ta)do
local oa,il=sub(a,2),q
if iv then
il,y=ta,r
end
if ord(a)==64 then
add(tt,{
il,y,function(ib)
return ib[oa+0]
end
})
elseif ord(a)==36 then
a=function(e,...)
e[oa](e,...)
end
elseif ord(a)==37 then
a=j[oa]
elseif ord(a)==126 then
add(tt,{
il,y,function()
return q[oa]
end
})
elseif a=="eo"or a=="tk"then a=a=="eo"
elseif a=="ii"or a==""then a=nil
elseif a=="d"then a=function()end
end
ta[r]=a
end
add(tt,ru)
if iv then
return ta
else
return ta[1]
end
end
function ln(t)
if type(t)=="table"then
t.dj=true
end
return t
end
ti={}
function ij(hz,db,...)
local cs,lc=unpack(split(db,"|"))
local ho,eh,ct,l_,ds={...},unpack(eb(cs))
j[eh]=function(...)
local sd,tq,e={...},ao(ho),{}
if hz then
e=deli(sd,1)
end
for r=1,ct do
add(tq,sd[r]or false,r)
end
if not e[eh]then
foreach(l_,function(tz)
if type(tz)~="table"then
tz={tz}
end
e=j[tz[1]](e,unpack(tz,2))
end)
ao(eb(lc,unpack(tq)),e)
if not e[eh]then
ti[eh]=ti[eh]or{}
add(ti[eh],e)
end
e.eh,e[eh],e.pause=eh,true,e.pause or{}
foreach(ds,function(te)
e.pause[te]=true
end)
end
ez(e,"rg",e)
return e
end
end
function i(...)ij(true,...)end
function ts(...)ij(false,...)end
function ah(eh,od,...)
for e in all(ti[eh])do
ez(e,od,e,...)
end
end
dr=eb[[1]]
function rt(w,a,o,ep,eg,...)
ep,eg=ep or 1,eg or 1
spr(w,a-ep*4,o-eg*4,ep,eg,...)
end
function iy(e,dx,...)
if e and e.hk then
(dx or rt)(e.w,e.a*8+e.ox+e.ou,e.o*8+e.oo+e.tx,e.ep,e.eg,e.v,e.oq,...)
end
end
function hx(e)iy(e,hl,e.iu)end
function rl(...)
foreach({...},hx)
foreach({...},iy)
end
function cq(ef,ew,ev,ej)
ey(rect,
[[2]],ef,ew,ev,ej)
end
function s_(flip,oi,tl)
oi=oi-tl*4
if flip then
return tl*8-1+oi,-1
else
return oi,1
end
end
function hl(w,a,o,ep,eg,v,oq,b)
local sm,ne=s_(v,a,ep)
local su,re=s_(oq,o,eg)
local tm=dr[w]
if tm then
for r=1,#tm,4 do
rectfill(
sm+ne*tm[r],
su+re*tm[r+1],
sm+ne*tm[r+2],
su+re*tm[r+3],
b)
end
end
end
function mg(em,a,o,lk,lv)
for r=-1,1 do
for ad=-1,1 do
oh(em,a+r,o+ad,0,BG_UI,BG_UI)
end
end
oh(em,a,o,0,lk,lv)
end
function oh(em,a,o,i_,rw,cn)
if i_==0 then a-=#em*2
elseif i_>0 then a-=#em*4+1 end
ey(print,[[3]],em,a,o,rw,cn)
end
function ly(ef,ew,ev,ej)
clip(ef,ew,ev+1-flr(ef),ej+1-flr(ew))
end
function lp(b)
ey(rectfill,[[4]],b or 0)
end
du=eb[[5]]
function ih(r)
for to=0,15 do
pal(to,du[to+1][min(flr(r+1),7)])
end
end
ts([[6|7]],function(e)
ai=max(e.l/e.es*10,ai)
end)
ts([[8|7]],function(e)
ai=min((e.es-e.l)/e.es*10,ai)
end)
function cg(nl,ea,ei,aa,tj)
aa=aa or 0
tj=tj or 0
if nl and ea then
hs(nl,ei,ea.a+aa,ea.o+tj)
end
end
function hs(e,ei,a,o)
local nw=atan2(a-e.a,o-e.o)
e.th,e.tf=ei*cos(nw),ei*sin(nw)
end
function rz(e,s)
return e and s
and abs(e.a-s.a)<e.x+s.x
and abs(e.o-s.o)<e.k+s.k
end
function hp(e,s)
return e and s
and s.a-s.x>=e.a-e.x
and s.a+s.x<=e.a+e.x
and s.o-s.k>=e.o-e.k
and s.o+s.k<=e.o+e.k
end
function nr(et,di,ei,ip,dp,am,e,nm,al)
local sv=function(et,nf)
return flr(et-nf),-flr(-(et+nf))-1
end
local nx,sb=sv(et+ei,ip)
local lu,lx=sv(di,dp)
for ad=lu,lx do
if ei<0 and al(nx,ad)then
nm(e,am)
return nx+ip+1,0
elseif ei>0 and al(sb,ad)then
nm(e,am+1)
return sb-ip,0
end
end
return et,ei
end
i([[9|10]],function(e)
if e.eq and e.tg<=0 then
if ns(e)then
e.eq=false
end
elseif e.tg>0 then
e.tg-=1
end
end,function(e)
if not e.eq then
e:sk()
e:ow()
end
end,function(e)
e.eq=nil
end,function(e)
for y,ee in pairs(ti)do
if e[y]then del(ee,e)end
end
end,sy)
i[[11|12]]
i[[13|14]]
i[[15|16]]
i[[17|18]]
i[[19|20]]
i[[21|22]]
i[[23|20]]
i[[24|20]]
i[[25|20]]
i([[26|27]],function(e)
if e.o<of.o-of.er/2-8 then
e:tu()
end
end)
i([[28|29]],function(e)
e:sf()
e:nq()
end,function(e)
if e.a+e.g<c.a+.5 then
e.a=c.a+.5
e.g=0
end
if e.a+e.g>c.a+c.ed-.5 then
e.a=c.a+c.ed-.5
e.g=0
end
end,function(e)
if e.o+e.p<c.o+.5 then
e.o=c.o+.5
e.p=0
end
if e.o+e.p>c.o+c.er-.5 then
e.o=c.o+c.er-.5
e.p=0
end
end)
i[[30|31]]
i[[32|33]]
i([[34|35]],function(e)
e.t+=1
end)
i([[36|37]],function(e)
e.a+=e.g
e.o+=e.p
end)
i([[38|39]],function(e)
e.g+=e.th e.p+=e.tf
e.g*=e.sn e.p*=e.si
if e.th==0 and abs(e.g)<.01 then e.g=0 end
if e.tf==0 and abs(e.p)<.01 then e.p=0 end
end,function(e)
e.th,e.tf,e.g,e.p=0,0,0,0
end)
i([[40|41]],function(e)
local ea=e.ek
if ea then
if ea.eq then
e.a,e.o=ea.a+e.ob,ea.o+e.n_
e.g,e.p=ea.g+e.as,ea.p+e.st
e.ob+=e.as
e.n_+=e.st
e.ou,e.tx=ea.ou,ea.tx
if e.hw then
e.v=ea.v
end
else
e.eq=false
end
end
end)
i([[42|43]],function(e)
e.ou,e.tx=0,0
end)
i[[44|45]]
i[[46|45]]
i[[47|45]]
i[[48|45]]
i[[49|45]]
i[[50|45]]
i[[51|45]]
i[[52|45]]
i[[53|45]]
i[[54|45]]
i([[55|56]],iy,ua,rl
)
i([[57|58]],rl)
i([[59|60]],function(e,ni,la,dd)
e.g=la*ni
e.p=dd*ni
end)
i([[61|62]],function(e)
if e.tg>0 then
e.tf,e.th=0,0
e.tx=no()
e.iu=2
else
e.iu=1
end
end)
i([[63|64]],function(e,hb,rq)
if e.tg<=0 then
e.tg=rq
e.tr=max(0,e.tr-hb)
if e.tr==0 then
e.eq=false
end
end
end,function(e,tr)
e.tr=min(e.dn,e.tr+tr)
end)
i[[65|20]]
i([[66|67]],function(e)
if e.ss then
e.w=e.ss
else
if e.t%e.ce==0 then
e.ok+=1
e.ok%=e.hj
end
e.w=e.rf[e.dq+e.ok]or 0xffff
end
end)
i([[68|69]],function(e,s)
if hp(e,s)then
e:hq(s)
elseif rz(e,s)then
e:hh(s)
else
e:co(s)
end
end)
i[[70|71]]
i([[72|73]],function(e,ha)
local os={}
local ay=function(g,p)
local e_=g+p
local da=function(nh,a_,e,s,et,ei)
if ei!=0 and et<abs(e[nh]-s[nh])then
if e.is and s.is then
local sg=function(to)
if not to.op then
to[a_]=(e[a_]+s[a_])/2
end
end
sg(e)sg(s)
e_=0
end
os[s][a_]=rb(ei)
end
end
foreach(ha,function(s)
if e!=s and(not e.op or not s.op)then
local a,o=abs(e.a+g-s.a),abs(e.o+p-s.o)
if a<e.x+s.x and o<e.k+s.k then
os[s]=os[s]or eb[[74]]
ey(da,[[75]],e,s,a,g,o,p)
end
end
end)
return e_
end
e.g,e.p=ay(e.g,0),ay(0,e.p)
for s,h in pairs(os)do
e:oy(s,h.g,h.p)
end
end)
i([[76|77]],function(e,al)
local a,g=nr(e.a,e.o,e.g,e.x,e.k,0,e,e.oz,al)
local o,p=nr(e.o,e.a,e.p,e.k,e.x,2,e,e.oz,function(o,a)return al(a,o)end)
if e.le then
e.a,e.o,e.g,e.p=a,o,g,p
end
end)
i([[78|79]],function(e)
e.ir=j.my(e,e.nz,e.sp,e.iz,e.nn,d,function(ir,ty)
if cw(e,ty)then
iq(e)
if uo(e,ty)then
e:sq()
end
else
if mh()==e then
iq()
end
end
end)
end)
i[[80|81]]
i([[82|83]],function(e,ab)
if ab!=e.ek then
ez(ab,"ix",ab,e.df,aw(e.v),0)
iq(ab)
if e.ek then
ez(e.ek,"ix",e.ek,-e.cl,aw(e.v),0)
end
end
end
)
i([[84|85]],function(e)
if e==e.ek.td then e.ek.td=nil end
end)
i([[86|87]],function(e)
e.v=e.ek.v
e.ox=e.v and e.hn or-e.hn
ug(e.ht)
end,function(e)
e.as=aw(e.v)*e.au/e.es/FPS
mv()
end,function(e)
e.as,e.ob=0,e.v and-e.au or e.au
end,function(e)
e.as=-aw(e.v)*e.au/e.es/FPS/2
end)
i([[88|89]],function(e)
if ma(e.dk)then
e:tu()
j.uu(sj,e.w,e.iw)
pause"mo"
mn"1"
else
hr(2,6)
end
end)
i([[90|91]],function(e)
if mc(e.iw)==e.lb then
e:ow()
end
end)
ts([[92|93]],function(e)
oh("meow",(e.a+e.g)*8,(e.o+e.p)*8-12,0,7,2)
end,function(e)
if not btn(5)then
e:tu()
end
end,function(e)
sfx"0"
end)
ts([[94|95]],function(e)
local im=e.o<14
e.th=0
if im then
e.th=.02*ot()
if ot()>0 then e.v=false end
if ot()<0 then e.v=true end
if e.af and btn(4)then
e.p=-e.lf
sfx"1"
end
if btn(5)and(not e.sc or not e.sc.eq)then
e.sc=j.rm(e)
end
if not e.af then
if e.p<-.1 then
e.w=70
elseif e.p<.05 then
e.w=72
else
e.w=74
end
elseif ot()~=0 then
local ag=.25
local io=t()%ag
if io<.25*ag then
e.w=64
elseif io<.5*ag then
e.w=66
elseif io<.75*ag then
e.w=96
else
e.w=68
end
else
e.w=t()%1<.25 and 96 or 64
end
else
e:ik()
end
e.af=false
end,function(e,am)
local im=e.o<14
if im then
if am==3 then e.af=true end
end
end,function(e)
j.rj(.5,d,function()
e:tu()
ro()
end)
end)
ts([[96|97]],function(e)
local o_=so{
{192,4,2},
{197,4,2},
{197,4,2},
{197,4,2},
{224,3,2},
{224,3,2},
{224,3,2},
{224,3,2},
{227,5,2}
}
e.g=0.015625*(on(2)+1)
e.v=so{true,false}
e.w=o_[1]
e.ep=o_[2]
e.eg=o_[3]
e.o=on(2)*2+2
end)
ts([[98|99]],function(e)
oh(e.u,e.a*8,e.o*8-2*8,0,7,2)
end,function(e)
local f=3
if e.l<1*f then e.u="hey there kitty"
elseif e.l<2*f then e.u="you are in a game now"
elseif e.l<3*f then e.u="how do you like it?"
elseif e.l<4*f then e.u="use â¬…ï¸ and âž¡ï¸ to move"
elseif e.l<5*f then e.u="press ðŸ…¾ï¸ or z to jump"
elseif e.l<6*f then e.u="press âŽ or x to meow"
elseif e.l<7*f then e.u=""
elseif e.l<8*f then e.u="oh"
elseif e.l<9*f then e.u="dont fall into the water"
elseif e.l<10*f then e.u="kittens cant swim"
elseif e.l<11*f then e.u=""
elseif e.l<12*f then e.u="i also forgot to mention"
elseif e.l<13*f then e.u="this game isn't finished"
elseif e.l<14*f then e.u="it was made in 4 hours"
elseif e.l<15*f then e.u="for a game jam"
elseif e.l<16*f then e.u="so... you win!"
elseif e.l<17*f then e.u="congratulations"
elseif e.l<18*f then e.u="spectacular"
elseif e.l<19*f then e.u="wonderful"
elseif e.l<20*f then e.u="awesome"
elseif e.l<21*f then e.u="goodbye for now"
elseif e.l<26*f then e.u=""
elseif e.l<27*f then e.u="huh?"
elseif e.l<28*f then e.u="you're still here?"
elseif e.l<29*f then e.u="you must be waiting"
elseif e.l<30*f then e.u="for the credits"
elseif e.l<31*f then e.u="@alanxoc3 = code & sfx"
elseif e.l<32*f then e.u="@cadetthegreat = gfx"
elseif e.l<33*f then e.u="that's it for real"
elseif e.l<34*f then e.u="bye bye kitty"
elseif e.l<35*f then e.u=""
end
end)
function ci(m,om,ar,rk)
local ap=m.el and(m.el[om]+m.el[rk]/8)or 0
local ec=m[om]
local dw=m[ar]
local oc=c[ar]/2-dw/2
local tb=c[om]+c[ar]/2
local tw=lw(m.tw*8)/8
if ap<ec-tw then ec=ap+tw end
if ap>ec+tw then ec=ap-tw end
if ec<tb-oc then ec=tb-oc end
if ec>tb+oc then ec=tb+oc end
if c[ar]<=m[ar]then ec=tb end
m[om]=ec
end
function cx(a,o,to)
pset(a*8,o*8,to)
end
function ml(ef,ew,ev,ej,b)
line(ef*8,ew*8,ev*8,ej*8,b)
end
function mp(ef,ew,ev,ej,b)
rectfill(ef*8,ew*8,ev*8,ej*8,b)
end
function ra(de,dy,ch,cr,...)
map(de,dy,ch*8,cr*8,...)
end
function ux(a,o,ia,b)
circfill(a*8,o*8,ia*8,b)
end
function cp(a,o,ia,b)
circ(a*8,o*8,ia*8,b)
end
ts([[100|101]],
function(e)
if e.el and not e.el.eq then
e.el=nil
end
ey(ci,[[102]],e)
end,function(e)
if e.el then
e.a,e.o=e.el.a,e.el.o
e.rc=e.el.rc
end
e:ic()
end,function(e,ty)
if not ty or ty.az then
e.el=ty
end
end)
ai=8
poke(0x5f5c,15)
poke(0x5f5d,15)
function _init()
music(0,3000)
oj=eb([[103]],rx,function()sfx"63" end,
ro,hg,ll
)
end
function ro(e)
ey(ah,[[104]])
for a=-16,40,8 do
j.sh(a)
end
j.lr(.5,d,d)
c=ao(eb[[105]])
sj=j.nd(8,10)
j.h_(8,11.5)
of=j.m(16,16,3,sj)
of:rs()
end
function hg(e)
if t()%4==0 then
j.sh(-24)
end
ey(
ah,[[106]],ti["b"],
function(a,o)
return a>=c.a and a<c.a+c.ed and
o>=c.o and o<c.o+c.er and
fget(mget(a,o),6)
end
)
ey(ah,[[107]])
end
function og(ol)
return time()%ol/ol
end
function ll(e)
ih(ai)
hu(of,8,8)
end
function rx(e)
local ny=8+cos(e.l/e.es)*4-4
ih(ny)
camera(ny>1 and no())
rt(108,e.a,e.o,4,2)
ih"0"
camera()
end
function _update60()
ns(oj)
end
function _draw()
cls()
ez(oj,"h",oj)
end
function hf(m)
return(m.a-m.aa-8)*8
end
function cm(m)
return(m.o-m.tj-8)*8
end
function he(m)
camera(hf(m),cm(m))
end
function hu(m,a,o)
if m then
local x=a-m.ed/2
local k=o-m.er/2
m.aa=-(16-m.ed)/2+x
m.tj=-(16-m.er)/2+k
local ef,ev=x*8+4,(x+m.ed)*8-5
local ew,ej=k*8+4,(k+m.er)*8-5
he(m)
ly(ef,ew,ev,ej)
lp(c.to)
ra(48,1,c.a,c.o,c.ed,c.er)
ra(c.a,c.o,c.a,c.o,c.ed,c.er)
ey(ah,[[108]])
r_(ti.tp)
ey(ah,[[109]])
local an=115
for a=-128,128+128,4 do
local function rh(e,ib)return e+e*sin(a/64+og(4)+ib)end
rectfill(a,an-rh(2+sin(og(2)),0),a+3,an,1)
rectfill(a,an-rh(2+sin(og(4)),0.2+0.1*sin(og(6))),a+3,an,12)
end
rectfill(-128,an,128*3,128,12)
clip()
camera()
end
end
